基本架构图

![image-20210514174310652](https://gitee.com/BothSavage/PicGo/raw/master//image/20210514174310.png)



* 优化器

  * 在表里面有索引的时候决定使用哪个索引

  * 在多表连接的时候决定连接顺序

    ```
    mysql> select * from t1 join t2 using(ID)  where t1.c=10 and t2.d=20;
    ```

    - 既可以先从表 t1 里面取出 c=10 的记录的 ID 值，再根据 ID 值关联到表 t2，再判断 t2 里面 d 的值是否等于 20。
    - 也可以先从表 t2 里面取出 d=20 的记录的 ID 值，再根据 ID 值关联到 t1，再判断 t1 里面 c 的值是否等于 10。

  * 优化器的作用就是选择最优的

  

日志系统：

* redo log（Innodb特有的，引擎层的）
* bin log（server层的，所有引擎都有）

> 《孔乙己》
>
> 如果有人要赊账或者还账的话，掌柜一般有两种做法：
>
> - 一种做法是直接把账本翻出来，把这次赊的账加上去或者扣除掉；
> - 另一种做法是先在粉板上记下这次的账，等打烊以后再把账本翻出来核算。
>
> 
>
> InnoDB 引擎就会先把记录写到 redo log（粉板）里面，并更新内存，这个时候更新就算完成了。同时，InnoDB 引擎会在适当的时候，将这个操作记录更新到磁盘里面，而这个更新往往是在系统比较空闲的时候做，这就像打烊以后掌柜做的事。

